<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Sets collection · OptEnrichedSetCover.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="OptEnrichedSetCover.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">OptEnrichedSetCover.jl</span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Introduction</a></li><li><a class="tocitem" href="method.html">Method description</a></li><li class="is-active"><a class="tocitem" href="mosaic.html">Sets collection</a><ul class="internal"><li><a class="tocitem" href="#Sets-mosaic"><span>Sets mosaic</span></a></li><li><a class="tocitem" href="#set_relevance"><span>Set relevance</span></a></li><li><a class="tocitem" href="#Masked-sets-mosaic"><span>Masked sets mosaic</span></a></li></ul></li><li><a class="tocitem" href="cover_problem.html">Cover problem</a></li><li><span class="tocitem">Internals</span><ul><li><a class="tocitem" href="array_pool.html">Array pool</a></li><li><a class="tocitem" href="sparse_mask_matrix.html">Sparse mask matrix</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="mosaic.html">Sets collection</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="mosaic.html">Sets collection</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/alyst/OptEnrichedSetCover.jl/blob/master/docs/src/mosaic.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="mosaic"><a class="docs-heading-anchor" href="#mosaic">Sets collection</a><a id="mosaic-1"></a><a class="docs-heading-anchor-permalink" href="#mosaic" title="Permalink"></a></h1><h2 id="Sets-mosaic"><a class="docs-heading-anchor" href="#Sets-mosaic">Sets mosaic</a><a id="Sets-mosaic-1"></a><a class="docs-heading-anchor-permalink" href="#Sets-mosaic" title="Permalink"></a></h2><p>Gene Ontologies provide thousands of annotation terms. However, different genes often share the same annotations. This observation could be used to improve the processing of large collections. The genes could be grouped into disjoint <em>&quot;tiles&quot;</em> so that:</p><ul><li>all genes of the same tile share the same annotations</li><li>the tiles don&#39;t overlap and their <em>mosaic</em> covers all the genes </li><li>any annotation term could be represented as the (disjoint) union of the tiles</li></ul><p>This <em>&quot;mosaic&quot;</em> representation of the sets collection is implemented by the <code>SetMosaic</code> type. Internally it uses <a href="sparse_mask_matrix.html#OptEnrichedSetCover.SparseMaskMatrix"><code>SparseMaskMatrix</code></a> to maintain efficient element-to-set, element-to-tile etc mappings. Since there are (much) fewer tiles than individual elements, operations like sets union or intersection could be made much faster.</p><article class="docstring"><header><a class="docstring-binding" id="OptEnrichedSetCover.SetMosaic" href="#OptEnrichedSetCover.SetMosaic"><code>OptEnrichedSetCover.SetMosaic</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">SetMosaic{T,S}</code></pre><p>Represents a collection of (potentially overlapping) sets as a &quot;mosaic&quot; of non-overlapping &quot;tiles&quot;.</p><p><strong>Type parameters</strong></p><ul><li><code>T</code>: type of set elements</li><li><code>S</code>: type of set keys</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/alyst/OptEnrichedSetCover.jl/blob/88015f67018d0294c78abe29dbe65c227b199a56/src/mosaic.jl#L93-L102">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OptEnrichedSetCover.nelements" href="#OptEnrichedSetCover.nelements"><code>OptEnrichedSetCover.nelements</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">nelements(mosaic::SetMosaic) -&gt; Int</code></pre><p>The number of distinct elements (i.e. genes) in the sets collection.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/alyst/OptEnrichedSetCover.jl/blob/88015f67018d0294c78abe29dbe65c227b199a56/src/mosaic.jl#L205-L209">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OptEnrichedSetCover.nsets" href="#OptEnrichedSetCover.nsets"><code>OptEnrichedSetCover.nsets</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">nsets(mosaic::SetMosaic) -&gt; Int</code></pre><p>The number of sets in the collection.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/alyst/OptEnrichedSetCover.jl/blob/88015f67018d0294c78abe29dbe65c227b199a56/src/mosaic.jl#L219-L223">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OptEnrichedSetCover.ntiles" href="#OptEnrichedSetCover.ntiles"><code>OptEnrichedSetCover.ntiles</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">nsets(mosaic::SetMosaic) -&gt; Int</code></pre><p>The number of tiles (pairwise disjoint sets) in the mosaic representation of the set collection.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/alyst/OptEnrichedSetCover.jl/blob/88015f67018d0294c78abe29dbe65c227b199a56/src/mosaic.jl#L212-L216">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OptEnrichedSetCover.set" href="#OptEnrichedSetCover.set"><code>OptEnrichedSetCover.set</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">set(mosaic::SetMosaic, i::Integer) -&gt; AbstractVector{Int}</code></pre><p>Get the <code>i</code>-th set as the vector of indices of its elements.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/alyst/OptEnrichedSetCover.jl/blob/88015f67018d0294c78abe29dbe65c227b199a56/src/mosaic.jl#L233-L237">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OptEnrichedSetCover.setsize" href="#OptEnrichedSetCover.setsize"><code>OptEnrichedSetCover.setsize</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">set(mosaic::SetMosaic, i::Integer) -&gt; Int</code></pre><p>Get the size of the <code>i</code>-th set.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/alyst/OptEnrichedSetCover.jl/blob/88015f67018d0294c78abe29dbe65c227b199a56/src/mosaic.jl#L240-L244">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OptEnrichedSetCover.tile" href="#OptEnrichedSetCover.tile"><code>OptEnrichedSetCover.tile</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">tile(mosaic::SetMosaic, i::Integer) -&gt; AbstractVector{Int}</code></pre><p>Get the <code>i</code>-th mosaic tile as the vector of indices of its elements.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/alyst/OptEnrichedSetCover.jl/blob/88015f67018d0294c78abe29dbe65c227b199a56/src/mosaic.jl#L226-L230">source</a></section></article><h2 id="set_relevance"><a class="docs-heading-anchor" href="#set_relevance">Set relevance</a><a id="set_relevance-1"></a><a class="docs-heading-anchor-permalink" href="#set_relevance" title="Permalink"></a></h2><p>In the normal experiments, even the high-throughput ones, it&#39;s not possible to detect all annotated entities (genes or proteins). There&#39;s e.g. <em>detection bias</em> due to the experimental protocol or the <em>sensitivity limit</em> of the instrument. This must be taken into account when estimating, whether a particular gene set is enriched among e.g. upregulated genes – only the detected genes should be considered for the enrichment scores.</p><p>It may happen that the two distinct annotation terms share the same set of observed genes. In that case, their enrichment scores would be identical. If the enrichment is significant, both terms could be included in the report, but that would increase its <em>redundancy</em>. To solve this issue, <em>OptEnrichedSetCover</em> introduces the <em>set relevance score</em>. For example, if both <em>&quot;ribosome&quot;</em> and <em>&quot;small ribosomal subunits&quot;</em> terms are significant, but the genes of the <em>large ribosomal subunit</em> are not detected in the data, it&#39;s natural to prefer the &quot;small ribosomal subunit&quot; term over the whole ribosome. The <em>relevance score</em> formalizes that by estimating the enrichment of <em>detected</em> entities within each annotation term. See <a href="method.html#cover_quality_enrichment">cover quality</a> section for the exact definition of the <em>relevance score</em>.</p><article class="docstring"><header><a class="docstring-binding" id="OptEnrichedSetCover.set_relevance" href="#OptEnrichedSetCover.set_relevance"><code>OptEnrichedSetCover.set_relevance</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">set_relevance(nset_observed::Integer, nset::Integer,
              nobserved::Integer, ntotal::Integer) -&gt; Float64</code></pre><p>Calculates the relevance weight of the set that contains <code>nset</code> elements, <code>nset_observed</code> of which were present (not necessarily enriched) in the data that identified <code>nobserved</code> elements out of all known (<code>ntotal</code>). It is used by <a href="mosaic.html#OptEnrichedSetCover.SetMosaic"><code>SetMosaic</code></a> to penalize the sets, which could not be observed in the data (e.g. biological processes or pathways that involve proteins not expressed by the cells used in the experiments).</p><p>While for <a href="@ref"><code>MaskedSetMosaic</code></a> it&#39;s recommended to use the IDs of data entities (e.g. protein group IDs for proteomic data) to correctly count the set sizes and estimate enrichment; <code>set_relevance()</code> should use the counts derived from the original IDs of the annotation database (e.g. UniProt accession codes). Otherwise it&#39;s not possible to correctly estimate the number of elements that belong to the given annotated set, but were not observed in the data.</p><p>The returned value is the probability that no more than <code>nset_observed</code> elements were observed at random.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/alyst/OptEnrichedSetCover.jl/blob/88015f67018d0294c78abe29dbe65c227b199a56/src/set_score.jl#L123-L143">source</a></section></article><h2 id="Masked-sets-mosaic"><a class="docs-heading-anchor" href="#Masked-sets-mosaic">Masked sets mosaic</a><a id="Masked-sets-mosaic-1"></a><a class="docs-heading-anchor-permalink" href="#Masked-sets-mosaic" title="Permalink"></a></h2><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>MaskedSetMosaic</code>. Check Documenter&#39;s build log for details.</p></div></div><article class="docstring"><header><a class="docstring-binding" id="OptEnrichedSetCover.mask" href="#OptEnrichedSetCover.mask"><code>OptEnrichedSetCover.mask</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">mask(mosaic::SetMosaic, elmasks;
     mask_ids::Union{AbstractVector, AbstractSet, Nothing} = nothing,
     [min_nmasked=1], [max_setsize=nothing],
     [max_overlap_logpvalue=0.0]) -&gt; MaskedSetMosaic</code></pre><p>Construct <a href="@ref"><code>MaskedSetMosaic</code></a> from the [<code>SetMosaic</code>] and the collection of element masks.</p><p><strong>Arguments</strong></p><ul><li><code>min_nmasked</code>: the minimal number of masked elements in a set to include in the mosaic</li><li><code>max_setsize</code> (optional): ignore the annotation sets bigger than the specified size</li><li><code>max_overlap_logpvalue</code>: the threshold of Fisher&#39;s Exact Test log P-value of the overlap  between the set and the mask for the inclusion of the set into the mosaic.  <em>0</em> accepts all sets.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/alyst/OptEnrichedSetCover.jl/blob/88015f67018d0294c78abe29dbe65c227b199a56/src/masked_mosaic.jl#L95-L109">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OptEnrichedSetCover.unmask" href="#OptEnrichedSetCover.unmask"><code>OptEnrichedSetCover.unmask</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">unmask(mosaic::MaskedSetMosaic) -&gt; SetMosaic</code></pre><p>Get the original <a href="mosaic.html#OptEnrichedSetCover.SetMosaic"><code>SetMosaic</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/alyst/OptEnrichedSetCover.jl/blob/88015f67018d0294c78abe29dbe65c227b199a56/src/masked_mosaic.jl#L155-L159">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="method.html">« Method description</a><a class="docs-footer-nextpage" href="cover_problem.html">Cover problem »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 25 November 2020 18:30">Wednesday 25 November 2020</span>. Using Julia version 1.4.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
